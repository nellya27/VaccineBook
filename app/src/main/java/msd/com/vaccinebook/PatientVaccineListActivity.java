package msd.com.vaccinebook;import android.app.Activity;import android.os.AsyncTask;import android.os.Bundle;import android.widget.ArrayAdapter;import android.widget.ListView;import android.widget.TextView;import com.google.android.gms.common.api.GoogleApiClient;import org.json.JSONException;import org.json.JSONObject;import java.io.IOException;import java.util.ArrayList;import okhttp3.FormBody;import okhttp3.OkHttpClient;import okhttp3.Request;import okhttp3.RequestBody;import okhttp3.Response;public class PatientVaccineListActivity extends Activity {    private JSONObject m_listVaccinsObject;    private TextView patientIDTxt;    private TextView patientfirstNameTxt;    private TextView patientlastNameTxt;    private TextView vaccinDeseaseTxt;    private TextView vaccinDateTxt;    private TextView patientKupatHolimTxt;    private TextView vaccinPlaceTxt;    private TextView vaccinCommentsTxt;    private ListView vaccineList;    private ArrayAdapter adapter ;    private String ID;    private String firstName;    private String lastName;    private String vaccinDate;    private String patientKupatHolim;    private ArrayList<String>vaccinsArrayList=new ArrayList<String>();    private String[] patientValues;    private String[] vaccinParameters;    private String vaccinDesease;    private String vaccinPlace;    private String vaccinComments;    private String vaccinPortion;    private String vaccinSerial;    private String vaccinExpiration;    private GoogleApiClient client;    @Override    protected void onCreate(Bundle savedInstanceState) {        super.onCreate(savedInstanceState);        setContentView(R.layout.activity_patient_vaccine_list);        findViewById();        new VaccineList(getIntent().getExtras().getString("ID_of_patient")).execute();    }    public void findViewById() {        vaccineList=(ListView) findViewById(R.id.vaccinelistview);    }    private class VaccineList extends AsyncTask<String, String, String> {        private String patientID;        public VaccineList(String ID_Value)        {            this.patientID=ID_Value;        }        //###############################################################        protected String doInBackground(String... args) {            // Getting username and password from user input            String respStr = "";            try {                OkHttpClient client = new OkHttpClient();                RequestBody formBody = new FormBody.Builder()                        .add("patID", this.patientID)                        .build();                Request request = new Request.Builder()                        .url("http://10.0.2.2:8080/VaccineBookProject/ViewAllPatientVaccinsServlet")                         ///.url("http://172.16.150.203:8080/MywampDBTest/WampViewAllPatientVaccinsServlet")                        .post(formBody)                        .build();                Response response = null;                response = client.newCall(request).execute();                respStr = response.body().string();                try {                    m_listVaccinsObject = new JSONObject(respStr);                    vaccinDesease = m_listVaccinsObject.getString("patientDaleketKaved_A");                    vaccinPlace = m_listVaccinsObject.getString("patientDaleketKaved_A_place");                    vaccinComments = m_listVaccinsObject.getString("patientDaleketKaved_A_comments");                    vaccinPortion = m_listVaccinsObject.getString("patientDaleketKaved_A_portion");                    vaccinSerial = m_listVaccinsObject.getString("patientDaleketKaved_A_serial");                    vaccinExpiration = m_listVaccinsObject.getString("patientDaleketKaved_A_expiration");                    //IMPORTANT!!! REMOVE THE "" IN patientValues !!!                    vaccinParameters=new String[]{"",vaccinDesease,vaccinSerial,vaccinPortion,                            vaccinExpiration,vaccinPlace,vaccinComments};                    adapter=new ArrayAdapter(getApplicationContext(),android.R.layout.simple_list_item_1,                            vaccinParameters);                } catch (JSONException e) {                    // TODO Auto-generated catch block                    e.printStackTrace();                }            } catch (IOException e) {                e.printStackTrace();            }            return ID;        }        protected void onPostExecute(String result)        {/*            Log.i("MyTAG","ID is:"+ID);            Log.i("MyTAG","lastName is:"+lastName);            Log.i("MyTAG","firstName is:"+firstName);            Log.i("MyTAG","date is:"+vaccinDate);            Log.i("MyTAG","place is:"+vaccinPlace);            Log.i("MyTAG","desease is:"+vaccinDesease);            Log.i("MyTAG","kupat holim  is:"+patientKupatHolim);           // Log.i("MyTAG","patient ID  that passed is:"+this.patientID);*/            patientIDTxt.setText(ID);            patientfirstNameTxt.setText(firstName);            patientlastNameTxt.setText(lastName);            vaccinDeseaseTxt.setText(vaccinDesease);            vaccinDateTxt.setText(vaccinDate);            patientKupatHolimTxt.setText(patientKupatHolim);            vaccinPlaceTxt.setText(vaccinPlace);            vaccineList.setAdapter(adapter);        }    }}